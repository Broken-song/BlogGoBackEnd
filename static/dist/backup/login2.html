<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>Login & Register - Starpearl</title>
    <link rel="stylesheet" 
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" 
        integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" 
        crossorigin="anonymous" 
        referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="./style/login2.css">
</head>

<body>
    <header>
        <div class="navbar">
			<div class="menu">
				<span></span>
				<span></span>
				<span class = span></span>
				<span class = span></span>
				<span class = span></span>
				<span></span>
			</div>
			<ul>
				<li><a href = "./index.html" title = "主页">主页</a></li>
                <li><a href = "./server.html" title = "服务器">服务器</a></li>
                <li><a href = "./whitelist.html" title = "白名单申请">白名单申请</a></li>
                <li><a href = "about" title = "关于">关于</a></li>
                <li><a class = backer title = "返回上一页" >返回上一页</a></li>
			</ul>
		</div>
    </header>
    <div class="container">
        <div class="form-box">
            <!-- 注册 -->
            <form action = "http://127.0.0.1:8081/user/register" method = "POST" class = "reg">
                <div class="register-box hidden">
                    <h1>register</h1>
                    <input type="account" placeholder="用户名" name = "account" required>
                    <input type="email" placeholder="邮箱" name = "email"required>
                    <input type="password" placeholder="密码" name = "password" required>
                    <input type="password" placeholder="确认密码" required>
                    <button type = "submit" id = "reg_btn">注册</button>
                </div>
            </form>
            <!-- 登录 -->
            <form action = "http://127.0.0.1:8081/user/login" method = "POST" class = "log">
                <div class="login-box">
                    <h1>login</h1>
                    <input type="account" placeholder="用户名" name = "account" required>
                    <input type="password" placeholder="密码" name = "password" required>
                    <button type = "submit" id = "login_btn">登录</button>
                </div>
            </form>
        </div>
        <div class="con-box left">
            <h2>欢迎来到<span>星玥</span></h2>
            <p>快来注册你的<span>星玥账号</span>吧</p>
            <img src="./images/11001.jpg" alt="">
            <p>已有账号？</p>
            <button id="login">去登录</button>
        </div>
        <div class="con-box right">
            <h2>欢迎来到<span>星玥</span></h2>
            <p>快来登录你的<span>星玥账号</span>吧</p>
            <img src="./images/IMG_5892.jpg" alt="">
            <p>没有账号？</p>
            <button id="register">去注册</button>
        </div>
    </div>
    <script>
        // 要操作到的元素
        let login=document.getElementById('login');
        let register=document.getElementById('register');
        let form_box=document.getElementsByClassName('form-box')[0];
        let register_box=document.getElementsByClassName('register-box')[0];
        let login_box=document.getElementsByClassName('login-box')[0];
        let index = document.getElementById('index');
        // 去注册按钮点击事件
        register.addEventListener('click',()=>{
            form_box.style.transform='translateX(100%)';
            login_box.classList.add('hidden');
            register_box.classList.remove('hidden');
        })
        // 去登录按钮点击事件
        login.addEventListener('click',()=>{
            form_box.style.transform='translateX(0%)';
            register_box.classList.add('hidden');
            login_box.classList.remove('hidden');
        })
        // 去上一页按钮点击事件
        const Backer = document.querySelector('.backer');
        Backer.onclick = function(){
            window.history.back(-1);
        }
        // 下拉菜单触发事件
        const el = document.querySelector('.menu')
        const navbar = document.querySelector('.navbar')
            
        el.onclick = function () {
            el.classList.toggle('closeable');
            navbar.classList.toggle('open')
            const isOpen = navbar.classList.contains('open')
        }
        //登录按键触发事件
        // const log_btn = document.querySelector('#login_btn')
        // log_btn.onclick = function(e) {
        //     e.preventDefault()
        //     let xhr = new XMLHttpRequest()
        //     xhr.open('post','http://127.0.0.1:8081/user/login')
        //     let fd = new FormData(document.querySelector('.log'))
        //     xhr.setRequestHeader("Content-Type","application/json")
        //     xhr.onload = function() {
        //         alert(xhr.response)
        //     }
        //     xhr.send(fd)
        // }
        //注册按键触发事件
        const reg_btn = document.querySelector('#reg_btn')
        reg_btn.onclick = function(e) {
            e.preventDefault()
            let xhr = new XMLHttpRequest()
            xhr.open('post','http://127.0.0.1:8081/user/register')
            let fd = new FormData(document.querySelector('.reg'))
            // xhr.setRequestHeader("Content-Type","application/json")
            xhr.onload = function() {
                alert(xhr.response)
            }
            xhr.send(fd)
        }
    </script>
</body>

</html>